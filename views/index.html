<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>runCHI</title>
        <meta name="description" content="Find a local run!" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--Bootstrap 4-->
        <link rel="stylesheet" href="assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
        <!--icons-->
        <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
        <link rel="stylesheet" href="assets/css/style.css">
        <!--===============================================================================================-->
        <link rel="icon" type="image/png" href="assets/images/icons/favicon.ico" />
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/fonts/iconic/css/material-design-iconic-font.min.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/vendor/animate/animate.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/vendor/css-hamburgers/hamburgers.min.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/vendor/animsition/css/animsition.min.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/vendor/select2/select2.min.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/vendor/daterangepicker/daterangepicker.css">
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="assets/css/util.css">
        <link rel="stylesheet" type="text/css" href="assets/css/main.css">
        <link rel="stylesheet" type="text/css" href="assets/css/login.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
            crossorigin="" />
        <!-- Make sure you put this AFTER Leaflet's CSS -->
        <!-- <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
        <style>
            #mapid {
                height: 550px;
            }
        </style> -->
        <!--===============================================================================================-->
        <!--Google Maps API Link-->
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTQplToC7vrZZPdPirJm0clLpN3YbMW6U&libraries=places"></script>
    </head>
    <body>
        <!--header-->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top sticky-navigation">
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="ion-grid icon-sm"></span>
            </button>
            <a class="navbar-brand hero-heading" href="#"><img src = "assets/images/white-nike-swoosh.png" alt = "nike-swoosh" class = "white-nike-brand"></a>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item mr-3">
                        <a class="nav-link page-scroll" href="#main">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item mr-3">
                        <a class="nav-link page-scroll" href="#features">Looking to Run?</a>
                    </li>
                    <li class="nav-item mr-3">
                        <a class="nav-link page-scroll" href="#pricing">Add a Running Group</a>
                    </li>
                    <li class="nav-item mr-3">
                        <a class="nav-link page-scroll" href="#team">Team</a>
                    </li>
                    <li class="nav-item mr-3">
                        <a class="nav-link page-scroll" href="#blog">About Us</a>
                    </li>
                    <li class="nav-item mr-3">
                        <a class="nav-link page-scroll" href="#contact">Contact</a>
                    </li>
                </ul>c
            </div>
        </nav>

        <!--main section-->
        <section class="bg-texture hero" id="main">
            <div class="container">
                <!-- <div class="row"><br><br></div> -->
                <div class="row brand d-flex">
                    <div class="move text-center text-white wow fadeIn">
                        <br><br><br><br><br><br>
                        <img class="move img-fluid mx-auto d-block nike-swoosh-main" src="assets/images/white-nike-swoosh.png"/>
                        <h2 class="move">runCHI</h2>
                        <h3 class="move">Find that Perfect Run.</h3>
                        <!-- <h2 id="user">Welcome</h2> -->
                    </div>
                    <!-- sign up/login section -->
            <div class="signForm form half wow fadeIn ml-auto">
                <ul class="tab-group">
                  <li class="tab active"><a href="#signup">Sign Up</a></li>
                  <li class="tab"><a href="#login">Log In</a></li>
                </ul>
                
                <div class="tab-content">
                  <div id="signup">   
                    <h1 class = "sign-up">Sign Up for Free</h1>
                    
                    <form class = "signup">
                    
                    <div class="top-row">
                      <div class="field-wrap">
                        <label>
                          First Name<span class="req">*</span>
                        </label>
                        <input id="firstName-input" type="text" required autocomplete="off" />
                      </div>
                  
                      <div class="field-wrap">
                        <label>
                          Last Name<span class="req">*</span>
                        </label>
                        <input id="lastName-input" type="text"required autocomplete="off"/>
                      </div>
                    </div>
          
                    <div class="field-wrap">
                      <label>
                        Email Address<span class="req">*</span>
                      </label>
                      <input id="email-input" type="email"required autocomplete="off"/>
                    </div>
                    
                    <div class="field-wrap">
                      <label>
                        Set A Password<span class="req">*</span>
                      </label>
                      <input id="password-input" type="password"required autocomplete="off"/>
                    </div>
                    
                    <button type="submit" class="button button-block get-started"/>Get Started</button>
                    
                    </form>
          
                  </div>
                  
                  <div id="login">   
                    <h1 class = "sign-up">Welcome Back!</h1>
                    
                    <form class="login-form">
                    
                      <div class="field-wrap">
                      <label>
                        Email Address<span class="req">*</span>
                      </label>
                      <input id="login-email" value="run@gmail.com" type="email"required autocomplete="off"/>
                    </div>
                    
                    <div class="field-wrap">
                      <label>
                        Password<span class="req">*</span>
                      </label>
                      <input id="login-password" value="run" type="password"required autocomplete="off"/>
                    </div>
                    
                    <p class="forgot"><a href="#">Forgot Password?</a></p>
                    
                    <button class="button button-block log-in"/>Log In</button>
                    
                    </form>
          
                  </div>
                  
                </div><!-- tab-content -->
                
          </div> <!-- /form -->
                </div>
            </div>
        </section>

        <!--Run Groups-->
        <section class="bg-light" id="features">
            <div class="container">
                <div class="row mb-3">
                    <div class="col-md-6 col-sm-8 mx-auto text-center wow fadeIn">
                        <h2 class="text-primary">Looking to Run?</h2>
                        <p class="lead mt-4">
                            See below for a listing of available <br/>group runs.
                        </p>
                    </div>
                </div>
                
                <div class="row">
                    <div id="list" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search by location.." title="Type in a name">
                        <div id="runList"></div>    
                        <table class="table table-hover table-striped">
                            <thead>
                                <tr>
                                    <th>Group</th>
                                    <th>Place</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Runners</th>
                                    <th>Meet Group</th>
                                    <th>Join!</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                
                            </tbody>
                        </table>
                        
                    </div>
                    
                </div>
                
                

                </div>
            </div>
        </section>

        <!--Create Run-->
        <section class="bg-light" id="pricing">
            
            <div class="container">
            
                <form class="contact100-form validate-form">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <span class="contact100-form-title text-center">
                                Create a Run
                            </span>

                            <div class="wrap-input100 validate-input" data-validate="Please enter your group">
                                <input id="user" class="input100" type="user" name="user" placeholder="Group">
                                <span class="focus-input100"></span>
                            </div>
                            
                            <div class="wrap-input100 validate-input" data-validate="Please enter a date">
                                <input id="date" class="input100" type="date" name="date" placeholder="date">
                                <span class="focus-input100"></span>
                            </div>
                            
                            <div class="wrap-input100 validate-input" data-validate="Please enter a time">
                                <input id="time" class="input100" type="time" name="time" placeholder="time">
                                <span class="focus-input100"></span>
                            </div>
                            
                            <div class="wrap-input100 validate-input" data-validate="Please enter location">
                                <input id="addr" class="input100" type="text" name="place" placeholder="Location">
                                <span class="focus-input100"></span>
                            </div>
                            
                            <div class="wrap-input100">
                                <input id="pace" class="input100" type="text" name="pace" placeholder="Pace">
                                <span class="focus-input100"></span>
                            </div>
                            <!-- SUBMIT BUTTON FOR RUN GROUP -->
                            <div class="container-contact100-form-btn">
                                <button id="submit-run" class="contact100-form-btn" onClick="window.location.href=window.location.href">
                                    Submit
                                </button>
                            </div>
                        </div>
                    </div>            
                </form>
            </div>
        </section>

        <!-- MODAL FOR MAPS -->
        <!-- Modal -->
        
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="text-center modal-title" id="exampleModalLongTitle">Run Location</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <h4 class="text-center">Click For Details</h4>
                                <div id="findMap"></div>
                            </div>
                        </div>   
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!--team-->
        <section class="bg-white" id="team">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-8 mx-auto text-center">
                        <h2 class="text-primary">Our Team</h2>
                        <p class="lead pt-3">
                            Meet our awesome team.
                        </p>
                    </div>
                </div>
                <div class="row d-md-flex mt-5 text-center">
                    <div class="team col-sm-3 mt-2 wow fadeInLeft">
                        <img src="assets/images/Scott2.jpeg" alt="Male" class="img-team img-fluid rounded-circle"/>
                        <h5>Scott Saltzman</h5>
                        <p>Back/Front-End Developer</p>
                    </div>
                    <div class="team col-sm-3 mt-2 wow fadeIn">
                        <img src="assets/images/Brooke.png" alt="Male" class="img-team img-fluid rounded-circle"/>
                        <h5>Brooke Wildermuth</h5>
                        <p>Back/Front-End Developer</p>
                    </div>
                    <div class="team col-sm-3 mt-2 wow fadeIn">
                        <img src="assets/images/Ryan.png" alt="Male" class="img-team img-fluid rounded-circle"/>
                        <h5>Ryan Parks</h5>
                        <p>Back/Front-End Developer</p>
                    </div>
                    <div class="team col-sm-3 mt-2 wow fadeInRight">
                        <img src="assets/images/Aditi.png" alt="Male" class="img-team img-fluid rounded-circle"/>
                        <h5>Aditi Mishra</h5>
                        <p>Back/Front-End Developer</p>
                    </div>
                </div> 
            </div>
        </section>

        <!--blog-->
        <section class="bg-light" id="blog">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 offset-md-3 col-sm-8 offset-sm-2 col-xs-12 text-center">
                        <h2 class="text-primary">About Us</h2>
                        <p class="lead pt-3">
                            A little bit about our company and what we aim to achieve.
                        </p>
                    </div>
                </div>
                <div class="row d-md-flex mt-5">
                    <div class="col-sm-6 mt-2 wow fadeIn">
                        <div class="card">
                            <img class="card-img-top" src="assets/images/aboutus1.jpg" alt="Image">
                            <div class="card-body">
                                <h5 class="card-title"><a href="#">What we aim to achieve.</a></h5>
                                <p class="card-text">Here at runCHI, we understand that running groups don't always meet at the times and locations that are ideal for your schedule. This is where we come in to help. runCHI connects hundreds of runners all throughout the Chicago region to meetup for runs whenever and wherever the organizer decides.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 mt-2 wow fadeIn">
                        <div class="card">
                            <img class="card-img-top" src="assets/images/aboutus2.png" alt="Image">
                            <div class="card-body">
                                <h5 class="card-title"><a href="#">Client testimonal.</a></h5>
                                <p class="card-text">"When I first heard about runCHI, I was a very casual jogger who had no clue what I was doing. I was intimidated by the running groups such as CARA and wasn't sure I was committed to waking up on 6am every Saturday morning. runCHI gave me the opportunity to meet runners at my level and at times that worked with my busy schedule!" - Jessica Smith</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!--contact-->
        <section class="bg-texture-collage p-0" id="contact">
            <div class="container">
                <div class="row d-md-flex text-white text-center wow fadeIn">
                    <div class="col-sm-4 p-5">
                        <p><em class="ion-ios-telephone-outline icon-md"></em></p>
                        <p class="lead">+1 555 555-5555</p>
                    </div>
                    <div class="col-sm-4 p-5">
                        <p><em class="ion-ios-email-outline icon-md"></em></p>
                        <p class="lead">runCHI@gmail.com</p>
                    </div>
                    <div class="col-sm-4 p-5">
                        <p><em class="ion-ios-location-outline icon-md"></em></p>
                        <p class="lead">Chicago, Illinois</p>
                    </div>
                </div>
            </div>
        </section>

        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
        <script src="assets/js/scripts.js"></script>
        <script src="assets/js/auto.js"></script>
        <script src="assets/js/runchi.js"></script>
        <script src="assets/js/mapModal.js"></script>
        <script src="assets/js/login.js"></script>
        <script src="assets/js/Login2.js"></script>
        <script src="assets/js/signUp.js"></script>
        <script src="assets/js/tableFilter.js"></script>

    
    <script>
        $(document).ready(function () {
            let currentURL = window.location.origin;
            let numRunners;
            
            $.post(currentURL + '/api/runlist', function(data) {
                //var data = JSON.parse(data);
                //console.log(data);
                var runGroups = data;
                var runList = $('#tableBody');

                for (let i = 0; i < runGroups.length; i++) {
                    var id = runGroups[i].id;
                    var groupRow = $(`<tr></tr>`);
                    var groupName = $(`<td>${runGroups[i].groupName}</td>`);
                    var runLocation = $(`<td class="location">${runGroups[i].location}</td>`);
                    var date = $(`<td>${runGroups[i].date}</td>`);
                    var time = $(`<td>${runGroups[i].time}</td>`);
                    numRun = runGroups[i].numRun;
                    var runShow = $(`<td>${runGroups[i].numRun}</td>`);
                    var meet = $(`<td><div class='dropdown'><button data-val='${id}' type="button" class="profile btn btn-sm btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Profiles</button><div class='dropdown-menu showRunners'></div></div></td>`);
                    var button = $(`<td><button data-time='${runGroups[i].time}' data-date='${runGroups[i].date}' data-val='${id}' data-group='${runGroups[i].groupName}' data-loc='${runGroups[i].location}' type="button" class="join btn btn-sm btn-success">Join</button></td>`);

                    runList.append(groupRow);
                    groupRow.append(groupName);
                    groupRow.append(runLocation);
                    groupRow.append(date);
                    groupRow.append(time);
                    groupRow.append(runShow);
                    groupRow.append(meet);
                    groupRow.append(button);
                    

                }
            });
          

        });

        $('body').on('click', '.profile', function () {
                let id = ($(this).data('val'));
                $.get("/api/runsUsers/" + id, function (data, status) {
                console.log(id);
                //console.log(status);
                console.log(data);
                for (let j = 0; j < data.length; j++) {
                    let runnerName = `<a class='dropdown-item'>${data[j].firstName}</a>`;
                    $('.showRunners').append(runnerName);
                    console.log(data[j].firstName);
                }
            })
            //Get users in this Group
            var getRequestId = localStorage.getItem("runId");

            

            });

        $('body').on('click', '.join',function () {
            // id of the run group
            $(this).attr({
                'data-target': '#exampleModalCenter',
                'data-toggle': 'modal'
            });
            var id = $(this).data('val');
            $(this).removeClass('join, btn-success');
            $(this).addClass('joined, btn-info');
            $(this).html('Map');
            
            localStorage.setItem("runId", id);

            
            var newRunners = numRun+1;

            //console.log(numRun);
            //send the PUT request
            $.ajax('/api/numRun/' + id, {
                type: 'PUT',
                data: { newRunners }
            }).then(
                function() {
                    //console.log('added');
                    //location.reload(); 
                    // to get an updated list
                }
            )

            var runList = {
                userId: parseInt(localStorage.getItem("userId")), // need to grab user ID here. 
                runGroupId: id
            };

            $.ajax('/api/userRunList', {
                type: 'POST',
                data: runList
            }).then(
                function() {
                    // console.log('push user ID and run ID');
                }
            );

            

        })

    </script>
    </body>
</html>
